(this["webpackJsonpcovid-19-stats"]=this["webpackJsonpcovid-19-stats"]||[]).push([[0],{149:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),r=a(4),s=a(3),i=a(0),c=a.n(i),l=a(45),u=a.n(l),m=(a(53),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"top-header"},c.a.createElement("h1",{className:"main-heading"},"COVID-19 Stats"),c.a.createElement("h4",{className:"main-subtitle"},"Realtime Stats"))}}]),a}(i.Component)),d=a(6),h=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={globalStats:e.data},o}return Object(o.a)(a,[{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){return c.a.createElement("div",{className:"summary-trio"},c.a.createElement("div",{className:"confirmed"},c.a.createElement("p",{className:"heading"},"Confirmed"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.globalStats.TotalConfirmed)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.globalStats.NewConfirmed))),c.a.createElement("div",{className:"recovered"},c.a.createElement("p",{className:"heading"},"Recovered"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.globalStats.TotalRecovered)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.globalStats.NewRecovered))),c.a.createElement("div",{className:"deceased"},c.a.createElement("p",{className:"heading"},"Deceased"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.globalStats.TotalDeaths)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.globalStats.NewDeaths))))}}]),a}(i.Component),p=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={country:e.country,continent:e.continent,population:e.population,language:e.language},o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){e.country!==this.props.country&&this.setState({country:this.props.country,continent:this.props.continent,population:this.props.population,language:this.props.language})}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){return c.a.createElement("div",{className:"country-trio"},c.a.createElement("div",{className:"country-details"},c.a.createElement("div",{className:"image-container"},c.a.createElement("img",{src:"https://www.countryflags.io/"+this.state.country.CountryCode+"/flat/64.png",alt:this.state.country.Country})),c.a.createElement("p",{className:"name"},this.state.country.Country),c.a.createElement("p",{className:"continent"},this.state.continent),c.a.createElement("p",{className:"language"},"Language: ",this.state.language),c.a.createElement("p",{className:"population"},"Population: ",this.numberWithCommas(this.state.population)),c.a.createElement("p",{className:"affected"},"Affected Population:"," ",(this.state.country.TotalConfirmed/this.state.population*100).toFixed(3),"%")),c.a.createElement("div",{className:"country-specific-stats"},c.a.createElement("div",{className:"confirmed"},c.a.createElement("p",{className:"heading"},"Confirmed"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.country.TotalConfirmed)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.country.NewConfirmed))),c.a.createElement("div",{className:"recovered"},c.a.createElement("p",{className:"heading"},"Recovered"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.country.TotalRecovered)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.country.NewRecovered))),c.a.createElement("div",{className:"deceased"},c.a.createElement("p",{className:"heading"},"Deceased"),c.a.createElement("p",{className:"total"},this.numberWithCommas(this.state.country.TotalDeaths)),c.a.createElement("p",{className:"new"},c.a.createElement("span",{className:"plus"},"TODAY"),this.numberWithCommas(this.state.country.NewDeaths)))))}}]),a}(i.Component),y=a(46),C=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={countryProv:e.Country,givenCountry:e.givenCountry,isLoaded:!1,graphData:{}},o.getCountryCaseStats=o.getCountryCaseStats.bind(Object(d.a)(o)),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getCountryCaseStats()}},{key:"componentDidUpdate",value:function(e,t){t.givenCountry!==this.props.givenCountry&&(this.setState({givenCountry:this.props.givenCountry,isLoaded:!1,graphData:{},countryProv:void 0}),this.getCountryCaseStats())}},{key:"getCountryCaseStats",value:function(){var e=this;fetch("https://api.covid19api.com/total/dayone/country/".concat(void 0===this.state.countryProv?this.state.givenCountry.Slug:this.state.countryProv)).then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return new Date(Date.parse(e.Date)).toString().slice(4,10)})),n=t.map((function(e){return e.Confirmed})),o=t.map((function(e){return e.Active})),r=t.map((function(e){return e.Recovered})),s=t.map((function(e){return e.Deaths}));e.setState({isLoaded:!0,graphData:{labels:a,datasets:[{label:"Confirmed Cases",fill:!1,lineTension:1,backgroundColor:"",borderColor:"white",borderWidth:3.5,data:n,pointRadius:0},{label:"Active Cases",fill:!1,lineTension:1,backgroundColor:"",borderColor:"yellow",borderWidth:2,data:o,pointRadius:0},{label:"Recovered Cases",fill:!1,lineTension:1,backgroundColor:"",borderColor:"green",borderWidth:2,data:r,pointRadius:0},{label:"Deceased Cases",fill:!1,lineTension:1,backgroundColor:"",borderColor:"red",borderWidth:2,data:s,pointRadius:0}]}})}))}},{key:"maxYSize",value:function(e){for(var t=e[e.length-1],a=1;a<t;a*=10)if(a<t&&t<10*a)return console.log(a),10*a}},{key:"render",value:function(){return!1===this.state.isLoaded?c.a.createElement("div",{className:"graph-container"},c.a.createElement("h1",null,"Loading")):this.state.graphData.datasets[0].data==[]?c.a.createElement("div",{className:"graph-container"},c.a.createElement("h1",null,"Whoops! No data found")):c.a.createElement("div",{className:"graph-container"},c.a.createElement(y.a,{height:300,data:this.state.graphData,options:{legend:{labels:{fontColor:"#eeeeee",fontFamily:"Fira Sans"}},title:{display:!0,fontFamily:"Fira Sans",text:"Cases in ".concat(void 0===this.state.countryProv?this.state.givenCountry.Country:this.state.countryProv.charAt(0).toUpperCase()+this.state.countryProv.slice(1)),fontColor:"#eeeeee",fontSize:20},scales:{yAxes:[{type:"logarithmic",ticks:{min:0,max:this.maxYSize(this.state.graphData.datasets[0].data),callback:function(e){return 1e7===e?"10M":1e6===e?"1M":1e5===e?"100K":1e4===e?"10K":1e3===e?"1K":100===e?"100":10===e?"10":0===e?"0":null}}}]}}}))}}]),a}(i.Component),f=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={countryList:e.data,continent:null,population:null,subregion:null,language:null,selectedCountry:null},o.handleCountryChange=o.handleCountryChange.bind(Object(d.a)(o)),o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.state.countryList.sort((function(e,t){return e.Country>t.Country?1:-1}))}},{key:"handleCountryChange",value:function(e){var t=this,a=e.target.value;if("no-select"===a)this.setState({continent:null,population:null,subregion:null,selectedCountry:null,language:null});else{var n=this.state.countryList.filter((function(e){if(e.Slug===a)return e}));n=n[0],fetch("https://restcountries.eu/rest/v2/alpha/".concat(n.CountryCode)).then((function(e){return e.json()})).then((function(e){t.setState({continent:e.region,population:e.population,subregion:e.subregion,language:e.languages[0].name,selectedCountry:n})}))}}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"country-list"},c.a.createElement("select",{className:"country-dropdown",onChange:function(t){return e.handleCountryChange(t)},onBlur:function(t){return e.handleCountryChange(t)}},c.a.createElement("option",{value:"no-select"},"Select Country"),this.state.countryList.map((function(e){return c.a.createElement("option",{key:e.CountryCode,value:e.Slug},e.Country)}))),null!=this.state.selectedCountry?c.a.createElement("div",{className:"selected-country-div"},c.a.createElement(p,{country:this.state.selectedCountry,continent:this.state.continent,population:this.state.population,subregion:this.state.subregion,language:this.state.language}),c.a.createElement(C,{givenCountry:this.state.selectedCountry})):null,c.a.createElement("h3",null,null==this.state.selectedCountry?"Select a country to view it's stats":""))}}]),a}(i.Component),v=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={countryList:e.data,top16Countries:null,detectedCountry:e.country},o.calcTop16Countries=o.calcTop16Countries.bind(Object(d.a)(o)),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.calcTop16Countries()}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"calcTop16Countries",value:function(){var e=this.state.countryList;e.sort((function(e,t){return e.TotalConfirmed>t.TotalConfirmed?-1:1}));var t=e;t.map((function(e){switch(e.Country){case"Iran, Islamic Republic of":e.Country="Iran";break;case"United States of America":e.Country="USA";break;case"Holy See (Vatican City State)":e.Country="Vatican City";break;case"Macedonia, Republic of":e.Country="Macedonia";break;case"Taiwan, Republic of China":e.Country="Taiwan";break;case"Tanzania, United Republic of":e.Country="Tanzania";break;case"Venezuela (Bolivarian Republic)":e.Country="Venezuela"}return e})),this.state.countryList.map((function(e){switch(e.Country){case"Iran, Islamic Republic of":e.Country="Iran";break;case"United States of America":e.Country="USA";break;case"Holy See (Vatican City State)":e.Country="Vatican City";break;case"Macedonia, Republic of":e.Country="Macedonia";break;case"Taiwan, Republic of China":e.Country="Taiwan";break;case"Tanzania, United Republic of":e.Country="Tanzania";break;case"Venezuela (Bolivarian Republic)":e.Country="Venezuela"}return e})),this.setState({top16Countries:t})}},{key:"render",value:function(){var e=this;return null==this.state.top16Countries?c.a.createElement("h1",null,"Calculating..."):c.a.createElement("div",{className:"top-16-countries-list"},c.a.createElement("h1",null,"Top Countries Affected"),c.a.createElement("div",{className:"top-country-scroll-list"},this.state.top16Countries.map((function(t,a){return c.a.createElement("ul",{key:t.Country},c.a.createElement("div",{className:e.state.detectedCountry===t.Slug?"current-location":""},c.a.createElement("span",{className:"position"},a+1),c.a.createElement("span",{className:"country-name"},t.Country),c.a.createElement("span",{className:"case-count"},e.numberWithCommas(t.TotalConfirmed)," cases")))}))),c.a.createElement("p",null,"\u2195 Scroll to view more countries \u2195"))}}]),a}(i.Component),b=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={globalSummary:null,SUMMARY_URL:"https://api.covid19api.com/summary",countryList:null,isLoaded:!1,error:null,countryProv:""},e.fetchGlobalSummary=e.fetchGlobalSummary.bind(Object(d.a)(e)),e.locationFailed=e.locationFailed.bind(Object(d.a)(e)),e.setLocation=e.setLocation.bind(Object(d.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchGlobalSummary()}},{key:"fetchGlobalSummary",value:function(){var e=this;fetch(this.state.SUMMARY_URL).then((function(e){if(e.status>=200&&e.status<=299)return e.json();throw Error(e.statusText)})).then((function(t){e.setState({globalSummary:t.Global,countryList:t.Countries}),window.navigator.geolocation.getCurrentPosition(e.setLocation,e.locationFailed)})).catch((function(t){e.setState({error:t})}))}},{key:"setLocation",value:function(e){var t=this,a=e.coords,n=a.latitude,o=a.longitude;fetch("https://api.opencagedata.com/geocode/v1/json?key=ceca709d7d3449c1a51ed2a6f62e7daf&q=".concat(n,"%2C+").concat(o,"&pretty=1&no_annotations=1")).then((function(e){return e.json()})).then((function(e){var a=e.results[0].components.country_code.toUpperCase(),n=t.state.countryList.filter((function(e){if(e.CountryCode===a)return e.Slug}));t.setState({countryProv:n[0].Slug,isLoaded:!0})}))}},{key:"locationFailed",value:function(){this.setState({countryProv:"india",isLoaded:!0})}},{key:"render",value:function(){return this.state.isLoaded?c.a.createElement("div",{className:"main-panel"},c.a.createElement("div",{className:"global-summary"},c.a.createElement(h,{data:this.state.globalSummary}),c.a.createElement(C,{Country:this.state.countryProv})),c.a.createElement(v,{data:this.state.countryList,country:this.state.countryProv}),c.a.createElement(f,{data:this.state.countryList})):c.a.createElement("div",{className:"main-panel"},c.a.createElement("h1",null,null!=this.state.error?"\ud83d\ude44 ".concat(this.state.error.message,". Try reloading."):"LOADING"))}}]),a}(i.Component),g=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("p",{className:"main-subtitle"},c.a.createElement("a",{href:"https://github.com/Suraj-Gov/covid-19-stats/tree/master"},"Link to the repo")))}}]),a}(i.Component),E=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"main-container"},c.a.createElement(m,null),c.a.createElement(b,null),c.a.createElement(g,null))}}]),a}(c.a.Component);u.a.render(c.a.createElement(E,null),document.getElementById("root"))},48:function(e,t,a){e.exports=a(149)},53:function(e,t,a){}},[[48,1,2]]]);
//# sourceMappingURL=main.65efe760.chunk.js.map