(this["webpackJsonpcovid-19-stats"]=this["webpackJsonpcovid-19-stats"]||[]).push([[0],{149:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),o=a(4),s=a(3),c=a(0),l=a.n(c),i=a(45),u=a.n(i),m=(a(53),function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"top-header"},l.a.createElement("h1",{className:"main-heading"},"COVID-19 Stats"),l.a.createElement("h4",{className:"main-subtitle"},"Realtime Stats"))}}]),a}(c.Component)),d=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={globalStats:e.data},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"summary-trio"},l.a.createElement("div",{className:"confirmed"},l.a.createElement("p",{className:"heading"},"Confirmed"),l.a.createElement("p",{className:"total"},this.state.globalStats.TotalConfirmed),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.globalStats.NewConfirmed)),l.a.createElement("div",{className:"recovered"},l.a.createElement("p",{className:"heading"},"Recovered"),l.a.createElement("p",{className:"total"},this.state.globalStats.TotalRecovered),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.globalStats.NewRecovered)),l.a.createElement("div",{className:"deceased"},l.a.createElement("p",{className:"heading"},"Deceased"),l.a.createElement("p",{className:"total"},this.state.globalStats.TotalDeaths),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.globalStats.NewDeaths)))}}]),a}(c.Component),h=a(8),p=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={country:e.country,continent:e.continent,population:e.population,language:e.language},r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.country!==this.props.country&&this.setState({country:this.props.country,continent:this.props.continent,population:this.props.population,language:this.props.language})}},{key:"render",value:function(){return l.a.createElement("div",{className:"country-trio"},l.a.createElement("div",{className:"country-details"},l.a.createElement("div",{className:"image-container"},l.a.createElement("img",{src:"https://www.countryflags.io/"+this.state.country.CountryCode+"/flat/64.png",alt:this.state.country.Country})),l.a.createElement("p",{className:"name"},this.state.country.Country),l.a.createElement("p",{className:"continent"},this.state.continent),l.a.createElement("p",{className:"language"},"Language: ",this.state.language),l.a.createElement("p",{className:"population"},"Population: ",this.state.population),l.a.createElement("p",{className:"affected"},"Affected Population:",(this.state.country.TotalConfirmed/this.state.population*100).toFixed(3),"%")),l.a.createElement("div",{className:"country-specific-stats"},l.a.createElement("div",{className:"confirmed"},l.a.createElement("p",{className:"heading"},"Confirmed"),l.a.createElement("p",{className:"total"},this.state.country.TotalConfirmed),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.country.NewConfirmed)),l.a.createElement("div",{className:"recovered"},l.a.createElement("p",{className:"heading"},"Recovered"),l.a.createElement("p",{className:"total"},this.state.country.TotalRecovered),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.country.NewRecovered)),l.a.createElement("div",{className:"deceased"},l.a.createElement("p",{className:"heading"},"Deceased"),l.a.createElement("p",{className:"total"},this.state.country.TotalDeaths),l.a.createElement("p",{className:"new"},l.a.createElement("span",{className:"plus"},"TODAY"),this.state.country.NewDeaths))))}}]),a}(c.Component),y=a(46),C=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={countryProv:e.Country,givenCountry:e.givenCountry,isLoaded:!1,graphData:{}},r.getCountryCaseStats=r.getCountryCaseStats.bind(Object(h.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getCountryCaseStats()}},{key:"componentDidUpdate",value:function(e){e.givenCountry!==this.props.givenCountry&&(this.setState({givenCountry:this.props.givenCountry,isLoaded:!1,graphData:{}}),this.getCountryCaseStats())}},{key:"getCountryCaseStats",value:function(){var e=this;fetch("https://api.covid19api.com/dayone/country/".concat(void 0===this.state.countryProv?this.state.givenCountry.Slug:this.state.countryProv)).then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return new Date(Date.parse(e.Date)).toString().slice(4,10)})),n=t.map((function(e){return e.Confirmed})),r=t.map((function(e){return e.Active})),o=t.map((function(e){return e.Recovered})),s=t.map((function(e){return e.Deaths}));e.setState({isLoaded:!0,graphData:{labels:a,datasets:[{label:"Confirmed Cases - ".concat(n[n.length-1]),fill:!1,lineTension:1,backgroundColor:"",borderColor:"white",borderWidth:3.5,data:n,pointRadius:0},{label:"Active Cases - ".concat(r[r.length-1]),fill:!1,lineTension:1,backgroundColor:"",borderColor:"yellow",borderWidth:2,data:r,pointRadius:0},{label:"Recovered Cases - ".concat(o[o.length-1]),fill:!1,lineTension:1,backgroundColor:"",borderColor:"green",borderWidth:2,data:o,pointRadius:0},{label:"Deceased Cases - ".concat(s[s.length-1]),fill:!1,lineTension:1,backgroundColor:"",borderColor:"red",borderWidth:2,data:s,pointRadius:0}]}})}))}},{key:"render",value:function(){return!1===this.state.isLoaded?l.a.createElement("div",{className:"graph-container"},l.a.createElement("h1",null,"Loading")):l.a.createElement("div",{className:"graph-container"},l.a.createElement(y.a,{height:300,data:this.state.graphData,options:{legend:{labels:{fontColor:"#eeeeee",fontFamily:"Fira Sans"}},title:{display:!0,fontFamily:"Fira Sans",text:"Cases in ".concat(void 0===this.state.countryProv?this.state.givenCountry.Country:this.state.countryProv.charAt(0).toUpperCase()+this.state.countryProv.slice(1)),fontColor:"#eeeeee",fontSize:20},scales:{yAxes:[{type:"logarithmic",ticks:{min:0,max:1e6,callback:function(e,t,a){return 1e6===e?"1M":1e5===e?"100K":1e4===e?"10K":1e3===e?"1K":100===e?"100":10===e?"10":0===e?"0":null}}}]}}}))}}]),a}(c.Component),f=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={countryList:e.data,continent:null,population:null,subregion:null,language:null,selectedCountry:null},r.handleCountryChange=r.handleCountryChange.bind(Object(h.a)(r)),r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(){this.state.countryList.sort((function(e,t){return e.Country>t.Country?1:-1}))}},{key:"handleCountryChange",value:function(e){var t=this,a=e.target.value;if("no-select"===a)this.setState({continent:null,population:null,subregion:null,selectedCountry:null,language:null});else{var n=this.state.countryList.filter((function(e){if(e.Slug===a)return e}));n=n[0],fetch("https://restcountries.eu/rest/v2/alpha/".concat(n.CountryCode)).then((function(e){return e.json()})).then((function(e){console.log(),t.setState({continent:e.region,population:e.population,subregion:e.subregion,language:e.languages[0].name,selectedCountry:n})}))}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"country-list"},l.a.createElement("select",{className:"country-dropdown",onChange:function(t){return e.handleCountryChange(t)}},l.a.createElement("option",{value:"no-select"},"Select Country"),this.state.countryList.map((function(e){return l.a.createElement("option",{key:e.CountryCode,value:e.Slug},e.Country)}))),null!=this.state.selectedCountry?l.a.createElement("div",{className:"selected-country-div"},l.a.createElement(p,{country:this.state.selectedCountry,continent:this.state.continent,population:this.state.population,subregion:this.state.subregion,language:this.state.language}),l.a.createElement(C,{givenCountry:this.state.selectedCountry})):null,l.a.createElement("h3",null,null==this.state.selectedCountry?"Select a country to view it's stats":""))}}]),a}(c.Component),v=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={countryList:e.data,top16Countries:null,detectedCountry:e.country},r.calcTop16Countries=r.calcTop16Countries.bind(Object(h.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.calcTop16Countries()}},{key:"calcTop16Countries",value:function(){var e=this.state.countryList;e.sort((function(e,t){return e.TotalConfirmed>t.TotalConfirmed?-1:1}));var t=e.slice(0,16);t.map((function(e){switch(e.Country){case"Iran, Islamic Republic of":e.Country="Iran";break;case"United States of America":e.Country="USA";break;case"Holy See (Vatican City State)":e.Country="Vatican City";break;case"Macedonia, Republic of":e.Country="Macedonia";break;case"Taiwan, Republic of China":e.Country="Taiwan";break;case"Tanzania, United Republic of":e.Country="Tanzania";break;case"Venezuela (Bolivarian Republic)":e.Country="Venezuela"}return e})),this.state.countryList.map((function(e){switch(e.Country){case"Iran, Islamic Republic of":e.Country="Iran";break;case"United States of America":e.Country="USA";break;case"Holy See (Vatican City State)":e.Country="Vatican City";break;case"Macedonia, Republic of":e.Country="Macedonia";break;case"Taiwan, Republic of China":e.Country="Taiwan";break;case"Tanzania, United Republic of":e.Country="Tanzania";break;case"Venezuela (Bolivarian Republic)":e.Country="Venezuela"}return e})),this.setState({top16Countries:t})}},{key:"render",value:function(){var e=this;return null==this.state.top16Countries?l.a.createElement("h1",null,"Calculating..."):l.a.createElement("div",{className:"top-16-countries-list"},l.a.createElement("h1",null,"Top Countries Affected"),this.state.top16Countries.map((function(t){return l.a.createElement("ul",{key:t.Country},l.a.createElement("div",null,l.a.createElement("span",{className:"country-name"},e.state.detectedCountry===t.Slug?"\ud83d\udccd  ":"",t.Country),l.a.createElement("span",{className:"case-count"},e.state.detectedCountry===t.Slug?"\ud83d\udc49   ":"",t.TotalConfirmed," cases")))})))}}]),a}(c.Component),b=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={globalSummary:null,SUMMARY_URL:"https://api.covid19api.com/summary",countryList:null,isLoaded:!1,error:null,countryProv:""},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchGlobalSummary()}},{key:"fetchGlobalSummary",value:function(){var e=this;fetch(this.state.SUMMARY_URL).then((function(e){if(e.status>=200&&e.status<=299)return e.json();throw Error(e.statusText)})).then((function(t){e.setState({globalSummary:t.Global,countryList:t.Countries}),fetch("http://ip-api.com/json").then((function(e){return e.json()})).then((function(t){var a=t.countryCode,n=e.state.countryList.filter((function(e){if(e.CountryCode===a)return e.Slug}));e.setState({countryProv:n[0].Slug,isLoaded:!0})}))})).catch((function(t){e.setState({error:t})}))}},{key:"render",value:function(){return this.state.isLoaded?l.a.createElement("div",{className:"main-panel"},l.a.createElement("h3",null,"(You are in"," ",this.state.countryProv.charAt(0).toUpperCase()+this.state.countryProv.slice(1),")"),l.a.createElement("div",{className:"global-summary"},l.a.createElement(d,{data:this.state.globalSummary}),l.a.createElement(C,{Country:this.state.countryProv})),l.a.createElement(v,{data:this.state.countryList,country:this.state.countryProv}),l.a.createElement(f,{data:this.state.countryList})):l.a.createElement("div",{className:"main-panel"},l.a.createElement("h1",null,null!=this.state.error?"\ud83d\ude44 ".concat(this.state.error.message,". Try reloading."):"LOADING"))}}]),a}(c.Component),g=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"footer"},l.a.createElement("p",{className:"main-subtitle"},l.a.createElement("a",{href:"https://github.com/Suraj-Gov/covid-19-stats/tree/master"},"Link to the repo")))}}]),a}(c.Component),E=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-container"},l.a.createElement(m,null),l.a.createElement(b,null),l.a.createElement(g,null))}}]),a}(l.a.Component);u.a.render(l.a.createElement(E,null),document.getElementById("root"))},48:function(e,t,a){e.exports=a(149)},53:function(e,t,a){}},[[48,1,2]]]);
//# sourceMappingURL=main.6534a6d3.chunk.js.map